/*! 
jasmine-tree 0.1.3 2016-02-09T10:18:08.197Z
Copyright 2016 Massimo Foti (massimo@massimocorner.com) and Emily Meroni (emily.meroni@gmail.com)
Licensed under the Apache License, Version 2.0 | http://www.apache.org/licenses/LICENSE-2.0
 */
if("undefined"==typeof jQuery)throw"Unable to find jQuery";if("undefined"==typeof jasmineTree)var jasmineTree={};!function(){"use strict";jasmineTree.version="0.1.3";var CONST={CSS_CLASSES:{SUMMARY:"jasmine-tree-summary",TRIGGER:"jasmine-tree-trigger",TOOLBAR:"jasmine-tree-toolbar",BUTTON:"jasmine-tree-button",NODE_OPENED:"jasmine-tree-opennode"},SELECTORS:{FIRST_CHILD:":first-child",SUMMARY:".summary,.jasmine-summary",ROOT_SUITE:".summary > .suite,.jasmine-summary > .jasmine-suite",NODE_TITLE:"> li.suite-detail,> li.jasmine-suite-detail",NODE_SPECS:"> ul.specs,> ul.jasmine-specs",NODE_SUITES:"> ul.suite,> ul.jasmine-suite"},TEXT:{COLLAPSE:"Collapse All",EXPAND:"Expand All",SEPARATOR:" | ",PLUS:"+",MINUS:"-"},FILTER_REGEXP:new RegExp("[?&]spec=([^&]*)")},rootSuites=[];jasmineTree.getSpecFilter=function(){var match=CONST.FILTER_REGEXP.exec(window.location.search);return match&&decodeURIComponent(match[1].replace(/\+/g," "))},jasmineTree.collapseAll=function(){for(var i=0;i<rootSuites.length;i++)rootSuites[i].collapse()},jasmineTree.expandAll=function(){for(var i=0;i<rootSuites.length;i++)rootSuites[i].expand()},jasmineTree.addRootClass=function(){jQuery(CONST.SELECTORS.SUMMARY).addClass(CONST.CSS_CLASSES.SUMMARY)},jasmineTree.addToolbar=function(rootSuites){var toolbar=jQuery("<div></div>").addClass(CONST.CSS_CLASSES.TOOLBAR),collapse=jQuery("<span></span>").addClass(CONST.CSS_CLASSES.BUTTON).text(CONST.TEXT.COLLAPSE);toolbar.append(collapse);var separator=jQuery("<span></span>").text(CONST.TEXT.SEPARATOR);toolbar.append(separator);var expand=jQuery("<span></span>").addClass(CONST.CSS_CLASSES.BUTTON).text(CONST.TEXT.EXPAND);toolbar.append(expand),collapse.click(function(event){event.preventDefault(),jasmineTree.collapseAll()}),expand.click(function(event){event.preventDefault(),jasmineTree.expandAll()}),toolbar.insertBefore(jQuery(CONST.SELECTORS.SUMMARY))},jasmineTree.filterSpec=function(){var filter=jasmineTree.getSpecFilter();if(null!==filter){jasmineTree.collapseAll();for(var i=0;i<rootSuites.length;i++)rootSuites[i].containsPath(filter)===!0&&rootSuites[i].expand()}},jasmineTree.Suite=function(options){var config={rootNode:null,rootPath:""};jQuery.extend(config,options);var self=this,suites=[],specs=[],fullPath="",expanded=!0,triggerNode=jQuery("<a></a>").text(CONST.TEXT.MINUS).addClass(CONST.CSS_CLASSES.TRIGGER),init=function(){config.rootNode.addClass(CONST.CSS_CLASSES.NODE_OPENED);var titleNode=config.rootNode.find(CONST.SELECTORS.NODE_TITLE);fullPath=config.rootPath+jQuery.trim(titleNode.text()),triggerNode.insertBefore(titleNode.find(CONST.SELECTORS.FIRST_CHILD)),config.rootNode.find(CONST.SELECTORS.NODE_SPECS).each(function(index,item){specs.push(jQuery(item))}),config.rootNode.find(CONST.SELECTORS.NODE_SUITES).each(function(index,item){var childSuite=new jasmineTree.Suite({rootNode:jQuery(item),rootPath:fullPath+" "});suites.push(childSuite)}),attachEvents()},attachEvents=function(){triggerNode.click(function(event){event.preventDefault(),expanded===!0?self.collapse():self.expand()})},startsWith=function(str,subStr){return str.substring(0,subStr.length)===subStr};this.getPath=function(){return fullPath},this.containsPath=function(path){if(startsWith(self.getPath(),path)===!0)return!0;for(var j=0;j<specs.length;j++){var specPath=self.getPath()+" "+jQuery.trim(specs[j].text());if(specPath===path)return!0}for(var i=0;i<suites.length;i++)if(suites[i].containsPath(path)===!0)return!0;return!1},this.show=function(){config.rootNode.show()},this.hide=function(){config.rootNode.hide()},this.collapse=function(){config.rootNode.removeClass(CONST.CSS_CLASSES.NODE_OPENED),triggerNode.text(CONST.TEXT.PLUS);for(var i=0;i<suites.length;i++)suites[i].collapse(),suites[i].hide();for(var j=0;j<specs.length;j++)specs[j].hide();expanded=!1},this.expand=function(){config.rootNode.addClass(CONST.CSS_CLASSES.NODE_OPENED),triggerNode.text(CONST.TEXT.MINUS);for(var i=0;i<suites.length;i++)suites[i].expand(),suites[i].show();for(var j=0;j<specs.length;j++)specs[j].show();expanded=!0},init()},jasmineTree.init=function(){jQuery(CONST.SELECTORS.ROOT_SUITE).each(function(index,item){var suite=new jasmineTree.Suite({rootNode:jQuery(item)});rootSuites.push(suite)}),jasmineTree.addRootClass(),jasmineTree.addToolbar(),jasmineTree.filterSpec()},jasmine.getEnv().addReporter({jasmineDone:function(){jasmineTree.init()}})}();
//# sourceMappingURL=jasmine-tree.min.js.map
